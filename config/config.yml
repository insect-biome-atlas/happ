############################
##### INPUT PARAMETERS #####
############################
# The rundir parameter is the name of a subdirectory under data/ that must contain
# - asv_seqs.fasta (ASV sequences in FASTA format) 
# - asv_counts.tsv (counts of ASVs (rows) in samples (columns)) 
# - and asv_taxa.tsv (taxonomic assignments of each ASV)
rundir: "test"
# The run_name parameter is the name of the workflow run and is used to separate
# runs with specific parameters of the clustering tools. 
# With different run_name parameters on the same rundir you can cluster the ASVs
# while automatically using the same alignment output (from vsearch).
run_name: "default"
# With the split_rank parameter you can split the ASVs by a certain taxonomic rank
# prior to alignment and clustering, which parallellizes the workflow and can help
# speed things up on large datasets. 
# Note that the split_rank must exactly match one of the columns in the asv_taxa.tsv file
split_rank: "Family"
# The ranks parameter specifies what taxonomic ranks are included in the asv_taxa.tsv taxonomy file
ranks: 
  - "Kingdom"
  - "Phylum"
  - "Class"
  - "Order"
  - "Family"
  - "Genus"
  - "Species"
  - "BOLD_bin"
# The evaluation rank parameter specifies what taxonomic rank to use for evaluating
# the clustering results. This rank should correspond to the taxonomic rank that
# you expect the clustering to represent, e.g. if you expect the clustering to
# represent species, set this parameter to "Species".
evaluation_rank: "Species"
# Ranks to use for calculating consensus taxonomy for clusters
consensus_ranks:
  - "Family"
  - "Genus"
  - "Species"
# % threshold to use for calculating consensus taxonomy for clusters
# As an example, if a cluster has 10 sequences, and at least 8 of them are classified
# as "Species X" at the Species level, the consensus taxonomy for the cluster
# will be "Species X" if the threshold is set to 80, otherwise taxonomy will
# be attempted to be resolved at Genus level etc.
consensus_threshold: 80

chimera:
  run_name: "chimera1"
  # Should chimera detection and removal be performed on the input data?
  remove_chimeras: True
  # Select method for chimera filtering:
  #'batchwise' = run chimera detection on dataset as a whole.
  #'samplewise' = split input fasta into one file per sample and run chimera
  #               detection on each sample individually.
  method: "samplewise"
  # Select algorithm to use, you can choose from 'uchime_denovo', 'uchime2_denovo'
  # and 'uchime3_denovo'.
  algorithm: "uchime_denovo"
  # In batchwise method, require that a sequence marked as chimeric is present
  # with its parents in at least <min_samples_shared> samples
  min_samples_shared: 1
  # In batchwise method, require that a sequence marked as chimeric is present
  # with its parents in at least <min_frac_samples_shared> fraction of samples
  min_frac_samples_shared: 0
  # In samplewise method, require that a sequence is marked as chimeric in at least
  # <min_chimeric_samples> in order for it to be removed from analysis. If this
  # value is set to 0, ASVs have to be marked as chimeric in all samples
  min_chimeric_samples: 0
  # In samplewise method, require that a sequence is marked as chimeric in at least
  # <min_frac_chimeric_samples> fraction of samples in which the ASV is present in 
  # order for it to be removed from analysis. If this value is set to 0, ASVs have 
  # to be marked as chimeric in all samples
  min_frac_chimeric_samples: 0
  # Chimera detection settings
  # Note that these are not used for uchime2_denovo or uchime3_denovo. Instead these
  # algorithms require 'perfect chimeras' (see the Uchime manual for more info)
  dn: 1.4
  mindiffs: 3
  mindiv: 0.8
  minh: 0.28

# Alignments
vsearch:
  threads: 10
  id: 0.84
  iddef: "1"
  query_cov: 0.9

# Specify what clustering software to use. Choose from 'swarm', 'opticlust',
# and 'dbotu3'.
software:
  - "swarm"
  - "opticlust"
  #- "dbotu3"

opticlust:
  # For opticlust, choose whether pairwise alignments should be generated with
  # 'vsearch' or 'mothur'
  aligner: "vsearch"
  delta: 0.0001
  cutoff: 0.03
  initialize: "singleton"
  precision: 1000
  threads: 10

swarm:
  differences: 13
  no-otu-breaking: False
  fastidious: False
  boundary: 0
  threads: 10
  match-reward: 5
  mismatch-penalty: 4
  gap-opening-penalty: 12
  gap-extension-penalty: 4

dbotu3:
  dist: 0.1
  abund: 10.0
  pval: 0.0005

lulu:
  minimum_ratio_type: "min"
  minimum_ratio: 1
  minimum_match: 84
  minimum_relative_cooccurence: 0.95
